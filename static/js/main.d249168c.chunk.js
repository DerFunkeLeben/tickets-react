(this.webpackJsonpaviasales=this.webpackJsonpaviasales||[]).push([[0],{21:function(e,t,n){"use strict";n.r(t);var s=n(1),c=n.n(s),a=n(9),i=n.n(a),r=(n(8),n(3)),l=n.p+"static/media/Logo.4a04a60e.png",o=n(5),d=n(10),u=n(11),j=n(14),h=n(13),v=n(0);var b=function(e){var t=e.title,n=e.id,s=e.checked,c=e.onChange;return Object(v.jsxs)("li",{children:[Object(v.jsx)("input",{type:"checkbox",className:"checkbox",checked:s,onChange:function(){return c(n)}}),t]},n)},f=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(e){var s;return Object(d.a)(this,n),(s=t.call(this,e)).handleChange=function(e){var t=Object(o.a)(s.state.data);t[e].checked=!t[e].checked,e?t[0].checked=!t.slice(1).some((function(e){return!e.checked})):t.forEach((function(n){return n.checked=t[e].checked})),s.setState(t),s.handleFilter()},s.handleFilter=function(){return s.props.updateFilter(s.state.data)},s.state={data:["All","No transfers","1 transfer","2 transfers","3 transfers"].map((function(e){return{title:e,checked:!0}}))},s}return Object(u.a)(n,[{key:"render",value:function(){var e=this;return Object(v.jsxs)("section",{className:"filter",children:[Object(v.jsx)("h2",{children:"transfers"}),Object(v.jsx)("ul",{className:"filter__list",children:this.state.data.map((function(t,n){return Object(v.jsx)(b,{title:t.title,checked:t.checked,onChange:function(){return e.handleChange(n)}},n)}))})]})}}]),n}(c.a.Component),p=n(7),O=n.n(p),m=n(12);var x=function(e){var t=e.onClick;return Object(v.jsxs)("div",{className:"tabs",onClick:function(e){e.target.classList.contains("active")||(Object(o.a)(e.currentTarget.children).forEach((function(e){return e.classList.toggle("active")})),t(e.target.classList.contains("tabs__cheapest")?"price":"time"))},children:[Object(v.jsx)("button",{type:"button",className:"tabs-btn tabs__cheapest active",children:"The cheapest"}),Object(v.jsx)("button",{type:"button",className:"tabs-btn tabs__fastest",children:"The fastest"})]})};var k=function(e){var t,n,s=e.details,c=null===s||void 0===s?void 0:s.origin,a=null===s||void 0===s?void 0:s.destination,i=function(e){return("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)},r=i(new Date(null===s||void 0===s?void 0:s.date)),l=null===s||void 0===s?void 0:s.duration,o=Math.trunc(l/60)+"H "+l%60+"min",d=i(new Date(60*l*1e3+new Date(null===s||void 0===s?void 0:s.date).getTime())),u=null===s||void 0===s||null===(t=s.stops)||void 0===t?void 0:t.length,j=null===s||void 0===s||null===(n=s.stops)||void 0===n?void 0:n.join();return Object(v.jsxs)("div",{className:"ticket-details",children:[Object(v.jsxs)("div",{children:[Object(v.jsxs)("p",{className:"ticket-details__caption",children:[c," - ",a]}),Object(v.jsxs)("p",{className:"ticket-details__description",children:[r," - ",d]})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)("p",{className:"ticket-details__caption",children:"en route"}),Object(v.jsx)("p",{className:"ticket-details__description",children:o})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)("p",{className:"ticket-details__caption",children:u?u+" stop"+(1===u?"":"s"):"direct"}),Object(v.jsx)("p",{className:"ticket-details__description",children:j})]})]})};var g=function(e){var t=e.ticket,n=e.id,s=null===t||void 0===t?void 0:t.price,c="//pics.avs.io/99/36/".concat(null===t||void 0===t?void 0:t.carrier,".png"),a=null===t||void 0===t?void 0:t.segments[0],i=null===t||void 0===t?void 0:t.segments[1];return Object(v.jsxs)("li",{className:"ticket",children:[Object(v.jsxs)("div",{className:"ticket-header",children:[Object(v.jsxs)("span",{className:"ticket-cost",children:[s," P"]}),Object(v.jsx)("img",{src:c,alt:"logo"})]}),Object(v.jsx)(k,{details:a}),Object(v.jsx)(k,{details:i})]},n)};function N(e,t){return e.price-t.price}function _(e,t){return e.segments[0].duration+e.segments[1].duration-(t.segments[0].duration+t.segments[1].duration)}var C=function(e){var t=e.filter,n=c.a.useState([]),s=Object(r.a)(n,2),a=s[0],i=s[1],l=c.a.useState("price"),o=Object(r.a)(l,2),d=o[0],u=o[1];c.a.useEffect((function(){(function(){var e=Object(m.a)(O.a.mark((function e(){var t,n,s,c,a,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://front-test.beta.aviasales.ru/search");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,s=n.searchId,c="https://front-test.beta.aviasales.ru/tickets?searchId="+s,e.next=10,fetch(c);case 10:return a=e.sent,e.next=13,a.json();case 13:r=e.sent,i(r.tickets);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var j=a.filter((function(e){return t.includes(e.segments[0].stops.length)&&t.includes(e.segments[1].stops.length)})).sort("price"===d?N:_);return Object(v.jsxs)("div",{className:"tickets-container",children:[Object(v.jsx)(x,{onClick:function(e){return u(e)}}),(null===j||void 0===j?void 0:j.length)?Object(v.jsx)("ul",{className:"tickets-list",children:function(e){for(var t=[],n=0;n<5;n++)t.push(Object(v.jsx)(g,{ticket:e[n],id:n},n));return t}(j)}):""]})};var w=function(){var e=c.a.useState([0,1,2,3]),t=Object(r.a)(e,2),n=t[0],s=t[1];return Object(v.jsxs)("div",{className:"container",children:[Object(v.jsx)("header",{className:"logo",children:Object(v.jsx)("img",{src:l,alt:"logo"})}),Object(v.jsxs)("main",{className:"main",children:[Object(v.jsx)(f,{updateFilter:function(e){var t=e.slice(1).flatMap((function(e,t){return e.checked?t:[]}));return s(t),t}}),Object(v.jsx)(C,{filter:n})]})]})};i.a.render(Object(v.jsx)(c.a.StrictMode,{children:Object(v.jsx)(w,{})}),document.getElementById("root"))},8:function(e,t,n){}},[[21,1,2]]]);
//# sourceMappingURL=main.d249168c.chunk.js.map