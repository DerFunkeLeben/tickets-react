{"version":3,"sources":["img/Logo.png","FilterItem.js","Filter.js","SortTabs.js","TicketDetails.js","Ticket.js","TicketsContainer.js","App.js","index.js"],"names":["FilterItem","title","id","checked","onChange","type","className","Filter","props","handleChange","index","data","state","slice","some","forEach","setState","handleFilter","updateFilter","map","value","this","React","Component","SortTabs","onClick","e","target","classList","contains","currentTarget","children","button","toggle","TicketDetails","details","origin","destination","date","getHours","getMinutes","departure","Date","duration","durationText","Math","trunc","arrival","getTime","stopsCount","stops","length","join","TicketsContainer","ticket","cost","price","logoAv","carrier","to","segments","from","src","alt","sortByPrice","a","b","sortByTime","filter","useState","tickets","setTickets","sortMethod","setSortMethod","useEffect","fetch","searchIdResponse","json","searchId","url","response","fetchData","filteredSortedTickets","includes","sort","content","i","push","Ticket","getRenderingTickets","App","setFilter","logo","result","flatMap","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"gKAAe,MAA0B,iC,8CCe1BA,MAbf,YAAuD,IAAjCC,EAAgC,EAAhCA,MAAOC,EAAyB,EAAzBA,GAAIC,EAAqB,EAArBA,QAASC,EAAY,EAAZA,SACtC,OACI,+BACI,uBACIC,KAAK,WACLC,UAAU,WACVH,QAASA,EACTC,SAAU,kBAAIA,EAASF,MAE1BD,IAPIC,ICyDFK,E,kDAzDX,WAAYC,GAAQ,IAAD,8BACf,cAAMA,IAiBVC,aAAe,SAACC,GACZ,IAAMC,EAAI,YAAO,EAAKC,MAAMD,MAE5BA,EAAKD,GAAOP,SAAWQ,EAAKD,GAAOP,QAE9BO,EAGDC,EAAK,GAAGR,SAAUQ,EAAKE,MAAM,GAAGC,MAAK,SAACF,GAAD,OAAYA,EAAMT,WAFvDQ,EAAKI,SAAQ,SAACH,GAAD,OAAYA,EAAMT,QAAUQ,EAAKD,GAAOP,WAMzD,EAAKa,SAASL,GACd,EAAKM,gBA/BU,EAkCnBA,aAAe,kBAAM,EAAKT,MAAMU,aAAa,EAAKN,MAAMD,OAhCpD,EAAKC,MAAQ,CACTD,KAAM,CACF,MACA,eACA,aACA,cACA,eACFQ,KAAI,SAACC,GACH,MAAO,CACHnB,MAAOmB,EACPjB,SAAS,OAZN,E,0CAoCnB,WAAU,IAAD,OACL,OACI,0BAASG,UAAU,SAAnB,UACI,2CACA,oBAAIA,UAAU,eAAd,SACKe,KAAKT,MAAMD,KAAKQ,KAAI,SAACP,EAAOF,GACzB,OACI,cAAC,EAAD,CACIT,MAAOW,EAAMX,MAEbE,QAASS,EAAMT,QACfC,SAAU,kBAAM,EAAKK,aAAaC,KAF7BA,e,GA9ChBY,IAAMC,W,wBCwBZC,MAzBf,YAAgC,IAAZC,EAAW,EAAXA,QAchB,OACI,sBAAKnB,UAAU,OAAOmB,QARN,SAACC,GACZA,EAAEC,OAAOC,UAAUC,SAAS,YAChB,YAAOH,EAAEI,cAAcC,UAC5BhB,SAAQ,SAACiB,GAAD,OAAYA,EAAOJ,UAAUK,OAAO,aACpDR,EAAsBC,EAAEC,OARjBC,UAAUC,SAAS,kBAA0B,QAC5C,UAWZ,UACI,wBAAQxB,KAAK,SAASC,UAAU,iCAAhC,0BAGA,wBAAQD,KAAK,SAASC,UAAU,yBAAhC,6BCyBG4B,MA5Cf,YAAqC,IAAD,IAAXC,EAAW,EAAXA,QACfC,EAAM,OAAGD,QAAH,IAAGA,OAAH,EAAGA,EAASC,OAClBC,EAAW,OAAGF,QAAH,IAAGA,OAAH,EAAGA,EAASE,YACvBC,EAAO,SAACA,GAAD,OACR,IAAMA,EAAKC,YAAY1B,OAAO,GAC/B,KACC,IAAMyB,EAAKE,cAAc3B,OAAO,IAE/B4B,EAAYH,EAAK,IAAII,KAAJ,OAASP,QAAT,IAASA,OAAT,EAASA,EAASG,OACnCK,EAAQ,OAAGR,QAAH,IAAGA,OAAH,EAAGA,EAASQ,SACpBC,EACFC,KAAKC,MAAMH,EAAW,IAAM,KAAQA,EAAW,GAAM,MAEnDI,EAAUT,EACZ,IAAII,KAAgB,GAAXC,EAAgB,IAAO,IAAID,KAAJ,OAASP,QAAT,IAASA,OAAT,EAASA,EAASG,MAAMU,YAEtDC,EAAU,OAAGd,QAAH,IAAGA,GAAH,UAAGA,EAASe,aAAZ,aAAG,EAAgBC,OAC7BD,EAAK,OAAGf,QAAH,IAAGA,GAAH,UAAGA,EAASe,aAAZ,aAAG,EAAgBE,OAE9B,OACI,sBAAK9C,UAAU,iBAAf,UACI,gCACI,oBAAGA,UAAU,0BAAb,UACK8B,EADL,MACgBC,KAEhB,oBAAG/B,UAAU,8BAAb,UACKmC,EADL,MACmBM,QAGvB,gCACI,mBAAGzC,UAAU,0BAAb,sBACA,mBAAGA,UAAU,8BAAb,SAA4CsC,OAEhD,gCACI,mBAAGtC,UAAU,0BAAb,SACK2C,EACKA,EAAa,SAA0B,IAAfA,EAAmB,GAAK,KAChD,WAEV,mBAAG3C,UAAU,8BAAb,SAA4C4C,WCrB7CG,MAjBf,YAA2C,IAAfC,EAAc,EAAdA,OAAQpD,EAAM,EAANA,GAC1BqD,EAAI,OAAGD,QAAH,IAAGA,OAAH,EAAGA,EAAQE,MACfC,EAAM,qCAA0BH,QAA1B,IAA0BA,OAA1B,EAA0BA,EAAQI,QAAlC,QACNC,EAAE,OAAGL,QAAH,IAAGA,OAAH,EAAGA,EAAQM,SAAS,GACtBC,EAAI,OAAGP,QAAH,IAAGA,OAAH,EAAGA,EAAQM,SAAS,GAE9B,OACI,qBAAItD,UAAU,SAAd,UACI,sBAAKA,UAAU,gBAAf,UACI,uBAAMA,UAAU,cAAhB,UAA+BiD,EAA/B,QACA,qBAAKO,IAAKL,EAAQM,IAAI,YAE1B,cAAC,EAAD,CAAe5B,QAASwB,IACxB,cAAC,EAAD,CAAexB,QAAS0B,MANA3D,ICNpC,SAAS8D,EAAYC,EAAGC,GACpB,OAAOD,EAAET,MAAQU,EAAEV,MAGvB,SAASW,EAAWF,EAAGC,GAGnB,OAFkBD,EAAEL,SAAS,GAAGjB,SAAWsB,EAAEL,SAAS,GAAGjB,UACvCuB,EAAEN,SAAS,GAAGjB,SAAWuB,EAAEN,SAAS,GAAGjB,UAwD9CU,MApDf,YAAuC,IAAXe,EAAU,EAAVA,OACxB,EAA8B9C,IAAM+C,SAAS,IAA7C,mBAAOC,EAAP,KAAgBC,EAAhB,KACA,EAAoCjD,IAAM+C,SAAS,SAAnD,mBAAOG,EAAP,KAAmBC,EAAnB,KAEAnD,IAAMoD,WAAU,YACG,uCAAG,sCAAAT,EAAA,sEACiBU,MAC3B,+CAFU,cACRC,EADQ,gBAIaA,EAAiBC,OAJ9B,uBAINC,EAJM,EAINA,SACJC,EACA,yDACAD,EAPU,UAQOH,MAAMI,GARb,eAQVC,EARU,iBASGA,EAASH,OATZ,QASVA,EATU,OAUdN,EAAWM,EAAKP,SAVF,4CAAH,qDAYfW,KACD,IAEH,IAQMC,EANkBZ,EAAQF,QAC5B,SAAChD,GAAD,OACIgD,EAAOe,SAAS/D,EAAMwC,SAAS,GAAGV,MAAMC,SACxCiB,EAAOe,SAAS/D,EAAMwC,SAAS,GAAGV,MAAMC,WAGFiC,KAC3B,UAAfZ,EAAyBR,EAAcG,GAU3C,OACI,sBAAK7D,UAAU,oBAAf,UACI,cAAC,EAAD,CAAUmB,QArBK,SAAC+C,GAAD,OAAgBC,EAAcD,OAsBvB,OAArBU,QAAqB,IAArBA,OAAA,EAAAA,EAAuB/B,QACpB,oBAAI7C,UAAU,eAAd,SAXgB,SAACgE,GAEzB,IADA,IAAMe,EAAU,GACPC,EAAI,EAAGA,EAAI,EAAGA,IACnBD,EAAQE,KAAK,cAACC,EAAD,CAAQlC,OAAQgB,EAAQgB,GAAIpF,GAAIoF,GAAQA,IACzD,OAAOD,EAQMI,CAAoBP,KAGzB,OChCDQ,MAvBf,WACI,MAA4BpE,IAAM+C,SAAS,CAAC,EAAG,EAAG,EAAG,IAArD,mBAAOD,EAAP,KAAeuB,EAAf,KASA,OACI,sBAAKrF,UAAU,YAAf,UACI,wBAAQA,UAAU,OAAlB,SACI,qBAAKwD,IAAK8B,EAAM7B,IAAI,WAExB,uBAAMzD,UAAU,OAAhB,UACI,cAAC,EAAD,CAAQY,aAdC,SAACP,GAClB,IAAMkF,EAASlF,EACVE,MAAM,GACNiF,SAAQ,SAAC1E,EAAOkE,GAAR,OAAelE,EAAMjB,QAAUmF,EAAI,MAEhD,OADAK,EAAUE,GACHA,KAUC,cAAC,EAAD,CAAkBzB,OAAQA,WCjB1C2B,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,U","file":"static/js/main.d249168c.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/Logo.4a04a60e.png\";","import React from 'react'\r\n\r\nfunction FilterItem({ title, id, checked, onChange }) {\r\n    return (\r\n        <li key={id}>\r\n            <input\r\n                type='checkbox'\r\n                className='checkbox'\r\n                checked={checked}\r\n                onChange={()=>onChange(id)}\r\n            />\r\n            {title}\r\n        </li>\r\n    )\r\n}\r\nexport default FilterItem\r\n","import React from 'react'\r\nimport FilterItem from './FilterItem.js'\r\n\r\nclass Filter extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            data: [\r\n                'All',\r\n                'No transfers',\r\n                '1 transfer',\r\n                '2 transfers',\r\n                '3 transfers',\r\n            ].map((value) => {\r\n                return {\r\n                    title: value,\r\n                    checked: true,\r\n                }\r\n            }),\r\n        }\r\n    }\r\n\r\n    handleChange = (index) => {\r\n        const data = [...this.state.data]\r\n\r\n        data[index].checked = !data[index].checked\r\n\r\n        if (!index)\r\n            data.forEach((state) => (state.checked = data[index].checked))\r\n        else\r\n            data[0].checked = data.slice(1).some((state) => !state.checked)\r\n                ? false\r\n                : true\r\n\r\n        this.setState(data)\r\n        this.handleFilter()\r\n    }\r\n\r\n    handleFilter = () => this.props.updateFilter(this.state.data)\r\n\r\n    render() {\r\n        return (\r\n            <section className='filter'>\r\n                <h2>transfers</h2>\r\n                <ul className='filter__list'>\r\n                    {this.state.data.map((state, index) => {\r\n                        return (\r\n                            <FilterItem\r\n                                title={state.title}\r\n                                key={index}\r\n                                checked={state.checked}\r\n                                onChange={() => this.handleChange(index)}\r\n                            />\r\n                        )\r\n                    })}\r\n                </ul>\r\n            </section>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Filter\r\n","import React from 'react'\r\n\r\nfunction SortTabs({ onClick }) {\r\n\r\n    function getSortMethod(target) {\r\n        if (target.classList.contains('tabs__cheapest')) return 'price'\r\n        else return 'time'\r\n    }\r\n\r\n    const handleClick = (e) => {\r\n        if (!e.target.classList.contains('active')) {\r\n            const buttons = [...e.currentTarget.children]\r\n            buttons.forEach((button) => button.classList.toggle('active'))\r\n            onClick(getSortMethod(e.target))\r\n        }\r\n    }\r\n    return (\r\n        <div className='tabs' onClick={handleClick}>\r\n            <button type='button' className='tabs-btn tabs__cheapest active'>\r\n                The cheapest\r\n            </button>\r\n            <button type='button' className='tabs-btn tabs__fastest'>\r\n                The fastest\r\n            </button>\r\n        </div>\r\n    )\r\n}\r\nexport default SortTabs\r\n","import React from 'react'\r\n\r\nfunction TicketDetails({ details }) {\r\n    const origin = details?.origin\r\n    const destination = details?.destination\r\n    const date = (date) =>\r\n        ('0' + date.getHours()).slice(-2) +\r\n        ':' +\r\n        ('0' + date.getMinutes()).slice(-2)\r\n\r\n    const departure = date(new Date(details?.date))\r\n    const duration = details?.duration\r\n    const durationText =\r\n        Math.trunc(duration / 60) + 'H ' + (duration % 60) + 'min'\r\n\r\n    const arrival = date(\r\n        new Date(duration * 60 * 1000 + new Date(details?.date).getTime())\r\n    )\r\n    const stopsCount = details?.stops?.length\r\n    const stops = details?.stops?.join()\r\n\r\n    return (\r\n        <div className='ticket-details'>\r\n            <div>\r\n                <p className='ticket-details__caption'>\r\n                    {origin} - {destination}\r\n                </p>\r\n                <p className='ticket-details__description'>\r\n                    {departure} - {arrival}\r\n                </p>\r\n            </div>\r\n            <div>\r\n                <p className='ticket-details__caption'>en route</p>\r\n                <p className='ticket-details__description'>{durationText}</p>\r\n            </div>\r\n            <div>\r\n                <p className='ticket-details__caption'>\r\n                    {stopsCount\r\n                        ? stopsCount + ' stop' + (stopsCount === 1 ? '' : 's')\r\n                        : 'direct'}\r\n                </p>\r\n                <p className='ticket-details__description'>{stops}</p>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\nexport default TicketDetails\r\n","import React from 'react'\r\nimport TicketDetails from './TicketDetails.js'\r\n\r\nfunction TicketsContainer({ ticket, id }) {\r\n    const cost = ticket?.price\r\n    const logoAv = `//pics.avs.io/99/36/${ticket?.carrier}.png`\r\n    const to = ticket?.segments[0]\r\n    const from = ticket?.segments[1]\r\n\r\n    return (\r\n        <li className='ticket' key={id}>\r\n            <div className='ticket-header'>\r\n                <span className='ticket-cost'>{cost} P</span>\r\n                <img src={logoAv} alt='logo'></img>\r\n            </div>\r\n            <TicketDetails details={to} />\r\n            <TicketDetails details={from} />\r\n        </li>\r\n    )\r\n}\r\nexport default TicketsContainer\r\n","import React from 'react'\r\nimport SortTabs from './SortTabs.js'\r\nimport Ticket from './Ticket.js'\r\n\r\nfunction sortByPrice(a, b) {\r\n    return a.price - b.price\r\n}\r\n\r\nfunction sortByTime(a, b) {\r\n    const aDuration = a.segments[0].duration + a.segments[1].duration\r\n    const bDuration = b.segments[0].duration + b.segments[1].duration\r\n    return aDuration - bDuration\r\n}\r\n\r\nfunction TicketsContainer({ filter }) {\r\n    const [tickets, setTickets] = React.useState([])\r\n    const [sortMethod, setSortMethod] = React.useState('price')\r\n\r\n    React.useEffect(() => {\r\n        const fetchData = async () => {\r\n            const searchIdResponse = await fetch(\r\n                'https://front-test.beta.aviasales.ru/search'\r\n            )\r\n            const { searchId } = await searchIdResponse.json()\r\n            let url =\r\n                'https://front-test.beta.aviasales.ru/tickets?searchId=' +\r\n                searchId\r\n            let response = await fetch(url)\r\n            let json = await response.json()\r\n            setTickets(json.tickets)\r\n        }\r\n        fetchData()\r\n    }, [])\r\n\r\n    const changeSortType = (sortMethod) => setSortMethod(sortMethod)\r\n\r\n    const filteredTickets = tickets.filter(\r\n        (value) =>\r\n            filter.includes(value.segments[0].stops.length) &&\r\n            filter.includes(value.segments[1].stops.length)\r\n    )\r\n\r\n    const filteredSortedTickets = filteredTickets.sort(\r\n        sortMethod === 'price' ? sortByPrice : sortByTime\r\n    )\r\n\r\n    const getRenderingTickets = (tickets) => {\r\n        const content = []\r\n        for (let i = 0; i < 5; i++)\r\n            content.push(<Ticket ticket={tickets[i]} id={i} key={i} />)\r\n        return content\r\n    }\r\n\r\n    return (\r\n        <div className='tickets-container'>\r\n            <SortTabs onClick={changeSortType} />\r\n            {filteredSortedTickets?.length ? (\r\n                <ul className='tickets-list'>\r\n                    {getRenderingTickets(filteredSortedTickets)}\r\n                </ul>\r\n            ) : (\r\n                ''\r\n            )}\r\n        </div>\r\n    )\r\n}\r\nexport default TicketsContainer\r\n","import './index.scss'\nimport logo from './img/Logo.png'\nimport Filter from './Filter.js'\nimport TicketsContainer from './TicketsContainer.js'\nimport React from 'react'\n\nfunction App() {\n    const [filter, setFilter] = React.useState([0, 1, 2, 3])\n    const updateFilter = (data) => {\n        const result = data\n            .slice(1)\n            .flatMap((value, i) => (value.checked ? i : []))\n        setFilter(result)\n        return result\n    }\n\n    return (\n        <div className='container'>\n            <header className='logo'>\n                <img src={logo} alt='logo' />\n            </header>\n            <main className='main'>\n                <Filter updateFilter={updateFilter} />\n                <TicketsContainer filter={filter} />\n            </main>\n        </div>\n    )\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}